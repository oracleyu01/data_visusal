## **ì˜ˆì œ17.** ì´ë™ í‰ê· ì„  ê·¸ë˜í”„ (Moving Average Plot)

ì´ë™ í‰ê· ì„  ê·¸ë˜í”„(Moving Average Plot)ëŠ” ì‹œê³„ì—´ ë°ì´í„°ì˜ ë‹¨ê¸°ì  ë³€ë™ì„±ì„ ì¤„ì´ê³  
ì¥ê¸°ì  ì¶”ì„¸ë¥¼ íŒŒì•…í•˜ê¸° ìœ„í•œ ì‹œê°í™” ê¸°ë²•ìœ¼ë¡œ,
ì¼ì • ê¸°ê°„ ë™ì•ˆì˜ ë°ì´í„°ë¥¼ í‰ê· í™”í•˜ì—¬ ë³´ë‹¤ ë¶€ë“œëŸ¬ìš´ ì¶”ì„¸ì„ ì„ ìƒì„±í•œë‹¤.
ì´ë¥¼ í†µí•´ ë§¤ì¶œ, ì£¼ê°€, ìˆ˜ìš”ëŸ‰ ë“±ì˜ ì‹œê³„ì—´ ë°ì´í„°ì—ì„œ ë…¸ì´ì¦ˆë¥¼ ì œê±°í•˜ê³  ì‹¤ì§ˆì ì¸ ë³€í™” ì¶”ì„¸ë¥¼ ì‹ë³„í•  ìˆ˜ ìˆë‹¤.

### â–  ì´ë™ í‰ê· ì„  ê·¸ë˜í”„ê°€ ì–¸ì œ í•„ìš”í•œê°€?

- ì‹œê³„ì—´ ë°ì´í„°ì˜ ì¼ì‹œì  ë³€ë™ì— ì˜í–¥ë°›ì§€ ì•Šê³  ì¤‘ì¥ê¸°ì  ì¶”ì„¸ë¥¼ íŒŒì•…í•˜ê³ ì í•  ë•Œ ìœ ìš©í•˜ë‹¤.
- ì‹œê³„ì—´ ë°ì´í„°ì˜ ê³„ì ˆì„±ê³¼ ì£¼ê¸°ì„±ì„ ë” ëª…í™•í•˜ê²Œ ì‹ë³„í•˜ê³ ì í•  ë•Œ íš¨ê³¼ì ì´ë‹¤.
  ì˜ˆ: ì¼ì¼ íŒë§¤ ë°ì´í„°ì˜ ì£¼ê°„ ì¶”ì„¸ íŒŒì•…, ì›”ë³„ ë§¤ì¶œì˜ ë¶„ê¸°/ë°˜ê¸° ì¶”ì„¸ í™•ì¸, ì£¼ê°€ ë°ì´í„°ì˜ ì¥ê¸° ë™í–¥ ë¶„ì„

### â–  ë¬¸ì œ: ì¼ì¼/ì£¼ê°„/ì›”ê°„ ë§¤ì¶œ ì¶”ì´ì˜ ì‹¤ì§ˆì ì¸ ë³€í™” íŒ¨í„´ì€ ì–´ë– í•œê°€?

- ëª©ì :
  - ë‹¨ê¸°ì  ë³€ë™ì„±ì„ ì œê±°í•˜ê³  ì‹¤ì§ˆì ì¸ ë§¤ì¶œ ì¶”ì„¸ íŒŒì•…
  - ë‹¤ì–‘í•œ ì£¼ê¸°(7ì¼, 30ì¼, 90ì¼)ì˜ ì´ë™ í‰ê·  ë¹„êµë¥¼ í†µí•œ ì¶”ì„¸ ë³€í™” ì‹œì  ì‹ë³„
  - ë§¤ì¶œ ì„±ì¥ê³¼ ë‘”í™” êµ¬ê°„ì˜ ì •í™•í•œ íŒŒì•…
  - ê³„ì ˆì  ë³€ë™ íŒ¨í„´ í™•ì¸ ë° ì¥ê¸°ì  íŠ¸ë Œë“œ ì˜ˆì¸¡

### - ë°ì´í„° ë¡œë“œ ë° Plotly ì´ë™ í‰ê· ì„  ê·¸ë˜í”„ ìƒì„±

```python
import pandas as pd
import plotly.graph_objects as go
from plotly.subplots import make_subplots
import numpy as np

# ë°ì´í„° ë¡œë“œ
df = pd.read_csv("c:\data\SUPERSTORE_2019.csv")

# ë‚ ì§œ í˜•ì‹ìœ¼ë¡œ ë³€í™˜
df['ì£¼ë¬¸ ì¼ì'] = pd.to_datetime(df['ì£¼ë¬¸ ì¼ì'])

# ì¼ë³„ ë§¤ì¶œ ë°ì´í„° ìƒì„±
daily_sales = df.groupby(pd.Grouper(key='ì£¼ë¬¸ ì¼ì', freq='D')).agg({
    'ë§¤ì¶œ': 'sum'
}).reset_index()

# ëˆ„ë½ëœ ë‚ ì§œ ì²˜ë¦¬ (ë§¤ì¶œì´ 0ì¸ ë‚ ì§œ ì¶”ê°€)
date_range = pd.date_range(start=daily_sales['ì£¼ë¬¸ ì¼ì'].min(), 
                          end=daily_sales['ì£¼ë¬¸ ì¼ì'].max(), 
                          freq='D')
daily_sales = daily_sales.set_index('ì£¼ë¬¸ ì¼ì').reindex(date_range, fill_value=0).reset_index()
daily_sales = daily_sales.rename(columns={'index': 'ì£¼ë¬¸ ì¼ì'})

# ì´ë™ í‰ê·  ê³„ì‚°
daily_sales['MA7'] = daily_sales['ë§¤ì¶œ'].rolling(window=7).mean()  # 7ì¼ ì´ë™ í‰ê· 
daily_sales['MA30'] = daily_sales['ë§¤ì¶œ'].rolling(window=30).mean()  # 30ì¼ ì´ë™ í‰ê· 
daily_sales['MA90'] = daily_sales['ë§¤ì¶œ'].rolling(window=90).mean()  # 90ì¼ ì´ë™ í‰ê· 

# ì´ë™ í‰ê· ì„  ê·¸ë˜í”„ ìƒì„±
fig = go.Figure()

# ì›ë³¸ ë°ì´í„° (íšŒìƒ‰ ë¼ì¸ìœ¼ë¡œ ë°°ê²½ì— í‘œì‹œ)
fig.add_trace(
    go.Scatter(x=daily_sales['ì£¼ë¬¸ ì¼ì'], y=daily_sales['ë§¤ì¶œ'],
               mode='lines', name='ì¼ë³„ ë§¤ì¶œ',
               line=dict(color='lightgray', width=1))
)

# ì´ë™ í‰ê· ì„  ì¶”ê°€
fig.add_trace(
    go.Scatter(x=daily_sales['ì£¼ë¬¸ ì¼ì'], y=daily_sales['MA7'],
               mode='lines', name='7ì¼ ì´ë™ í‰ê· ',
               line=dict(color='blue', width=2))
)

fig.add_trace(
    go.Scatter(x=daily_sales['ì£¼ë¬¸ ì¼ì'], y=daily_sales['MA30'],
               mode='lines', name='30ì¼ ì´ë™ í‰ê· ',
               line=dict(color='red', width=2))
)

fig.add_trace(
    go.Scatter(x=daily_sales['ì£¼ë¬¸ ì¼ì'], y=daily_sales['MA90'],
               mode='lines', name='90ì¼ ì´ë™ í‰ê· ',
               line=dict(color='green', width=3))
)

# ì°¨íŠ¸ ë ˆì´ì•„ì›ƒ ì„¤ì •
fig.update_layout(
    title='ì¼ë³„ ë§¤ì¶œ ë° ì´ë™ í‰ê· ì„ ',
    xaxis_title='ë‚ ì§œ',
    yaxis_title='ë§¤ì¶œ',
    width=1000,
    height=600,
    legend=dict(x=0.01, y=0.99, bgcolor='rgba(255, 255, 255, 0.5)')
)

# ì—°ë„ë³„ êµ¬ë¶„ì„  ì¶”ê°€
for year in range(2017, 2020):
    fig.add_vline(x=f"{year}-01-01", line_dash="dash", line_color="gray", opacity=0.7)

fig.show()
```

### - ë‹¤ì–‘í•œ ì´ë™ í‰ê· ì„ ì˜ êµì°¨ì  ë¶„ì„
```python
# ì´ë™ í‰ê· ì„  êµì°¨ì  ë¶„ì„ì„ ìœ„í•œ ë°ì´í„° ì¤€ë¹„
# ë‹¨ê¸°(7ì¼)ì™€ ì¤‘ê¸°(30ì¼) ì´ë™ í‰ê· ì„ ì˜ êµì°¨ ì‹ í˜¸ ìƒì„±
daily_sales['Signal'] = 0
daily_sales.loc[daily_sales['MA7'] > daily_sales['MA30'], 'Signal'] = 1  # ê³¨ë“  í¬ë¡œìŠ¤ (ìƒìŠ¹ ì¶”ì„¸)
daily_sales.loc[daily_sales['MA7'] < daily_sales['MA30'], 'Signal'] = -1  # ë°ë“œ í¬ë¡œìŠ¤ (í•˜ë½ ì¶”ì„¸)

# êµì°¨ì  ì‹ë³„ (ì‹ í˜¸ê°€ ë³€ê²½ë˜ëŠ” ì§€ì )
daily_sales['SignalChange'] = daily_sales['Signal'].diff()
crossover_points = daily_sales[daily_sales['SignalChange'] != 0].copy()

# ê³¨ë“  í¬ë¡œìŠ¤ì™€ ë°ë“œ í¬ë¡œìŠ¤ í¬ì¸íŠ¸ ë¶„ë¦¬
golden_cross = crossover_points[crossover_points['SignalChange'] > 0]
death_cross = crossover_points[crossover_points['SignalChange'] < 0]

# êµì°¨ì  ì‹œê°í™”
fig2 = go.Figure()

# ì›ë³¸ ë°ì´í„° (íšŒìƒ‰ ë¼ì¸ìœ¼ë¡œ ë°°ê²½ì— í‘œì‹œ)
fig2.add_trace(
    go.Scatter(x=daily_sales['ì£¼ë¬¸ ì¼ì'], y=daily_sales['ë§¤ì¶œ'],
               mode='lines', name='ì¼ë³„ ë§¤ì¶œ',
               line=dict(color='lightgray', width=1), opacity=0.5)
)

# ì´ë™ í‰ê· ì„  ì¶”ê°€
fig2.add_trace(
    go.Scatter(x=daily_sales['ì£¼ë¬¸ ì¼ì'], y=daily_sales['MA7'],
               mode='lines', name='7ì¼ ì´ë™ í‰ê· ',
               line=dict(color='blue', width=2))
)

fig2.add_trace(
    go.Scatter(x=daily_sales['ì£¼ë¬¸ ì¼ì'], y=daily_sales['MA30'],
               mode='lines', name='30ì¼ ì´ë™ í‰ê· ',
               line=dict(color='red', width=2))
)

# ê³¨ë“  í¬ë¡œìŠ¤ í¬ì¸íŠ¸ í‘œì‹œ
fig2.add_trace(
    go.Scatter(x=golden_cross['ì£¼ë¬¸ ì¼ì'], y=golden_cross['MA7'],
               mode='markers', name='ê³¨ë“  í¬ë¡œìŠ¤ (ìƒìŠ¹ ì‹ í˜¸)',
               marker=dict(color='green', size=10, symbol='triangle-up'))
)

# ë°ë“œ í¬ë¡œìŠ¤ í¬ì¸íŠ¸ í‘œì‹œ
fig2.add_trace(
    go.Scatter(x=death_cross['ì£¼ë¬¸ ì¼ì'], y=death_cross['MA7'],
               mode='markers', name='ë°ë“œ í¬ë¡œìŠ¤ (í•˜ë½ ì‹ í˜¸)',
               marker=dict(color='darkred', size=10, symbol='triangle-down'))
)

# ì°¨íŠ¸ ë ˆì´ì•„ì›ƒ ì„¤ì •
fig2.update_layout(
    title='ì´ë™ í‰ê· ì„  êµì°¨ì  ë¶„ì„ (ê³¨ë“  í¬ë¡œìŠ¤ ë° ë°ë“œ í¬ë¡œìŠ¤)',
    xaxis_title='ë‚ ì§œ',
    yaxis_title='ë§¤ì¶œ',
    width=1000,
    height=600,
    legend=dict(x=0.01, y=0.99, bgcolor='rgba(255, 255, 255, 0.5)')
)

fig2.show()
```

### - ë¶„ì„ ê²°ê³¼ í•´ì„

#### âœ… ì´ë™ í‰ê· ì„ ì„ í†µí•œ ì¶”ì„¸ ë¶„ì„
âœ” 7ì¼ ì´ë™ í‰ê· (íŒŒë€ìƒ‰): ë‹¨ê¸° ì¶”ì„¸ë¥¼ ë³´ì—¬ì£¼ë©°, ë§¤ì¶œì˜ ì£¼ê°„ ë³€ë™ íŒ¨í„´ì„ ë°˜ì˜í•œë‹¤.
âœ” 30ì¼ ì´ë™ í‰ê· (ë¹¨ê°„ìƒ‰): ì¤‘ê¸° ì¶”ì„¸ë¥¼ ë³´ì—¬ì£¼ë©°, ì›”ê°„ ë³€ë™ì„±ì„ ë¶€ë“œëŸ½ê²Œ ì²˜ë¦¬í•œë‹¤.
âœ” 90ì¼ ì´ë™ í‰ê· (ì´ˆë¡ìƒ‰): ì¥ê¸° ì¶”ì„¸ë¥¼ ë³´ì—¬ì£¼ë©°, ê³„ì ˆì  ë³€ë™ì„ ë„˜ì–´ì„  ì‹¤ì§ˆì ì¸ ì‚¬ì—… ì„±ì¥ ë°©í–¥ì„ ë‚˜íƒ€ë‚¸ë‹¤.

#### âœ… êµì°¨ì (í¬ë¡œìŠ¤) ë¶„ì„
âœ” ê³¨ë“  í¬ë¡œìŠ¤: ë‹¨ê¸° ì´ë™ í‰ê· ì´ ì¤‘/ì¥ê¸° ì´ë™ í‰ê· ì„ ìƒí–¥ ëŒíŒŒí•˜ëŠ” ì§€ì ìœ¼ë¡œ, ë§¤ì¶œ ìƒìŠ¹ ì¶”ì„¸ì˜ ì‹œì‘ì„ ì˜ë¯¸í•œë‹¤.
âœ” ë°ë“œ í¬ë¡œìŠ¤: ë‹¨ê¸° ì´ë™ í‰ê· ì´ ì¤‘/ì¥ê¸° ì´ë™ í‰ê· ì„ í•˜í–¥ ëŒíŒŒí•˜ëŠ” ì§€ì ìœ¼ë¡œ, ë§¤ì¶œ í•˜ë½ ì¶”ì„¸ì˜ ì‹œì‘ì„ ì˜ë¯¸í•œë‹¤.
âœ” êµì°¨ì  ë¹ˆë„: êµì°¨ì ì´ ìì£¼ ë°œìƒí•˜ëŠ” ê¸°ê°„ì€ ë§¤ì¶œ ë³€ë™ì„±ì´ í° ì‹œê¸°ë¡œ, ì‹œì¥ ë¶ˆì•ˆì •ì„±ì„ ë‚˜íƒ€ë‚¸ë‹¤.

#### âœ… ê³„ì ˆì  íŒ¨í„´ ì‹ë³„
âœ” ì´ë™ í‰ê· ì„ ì„ í†µí•´ ì—°ì¤‘ íŠ¹ì • ì‹œê¸°(ì˜ˆ: ì—°ë§, ë¶„ê¸°ë§)ì— ë°˜ë³µë˜ëŠ” ë§¤ì¶œ ìƒìŠ¹ íŒ¨í„´ì„ ì‹ë³„í•  ìˆ˜ ìˆë‹¤.
âœ” ì¥ê¸° ì´ë™ í‰ê· ì„ (90ì¼)ì´ ì§€ì†ì ìœ¼ë¡œ ìƒìŠ¹í•˜ëŠ” êµ¬ê°„ì€ ê³„ì ˆì  ìš”ì¸ì„ ë„˜ì–´ì„  ì‹¤ì§ˆì ì¸ ì‚¬ì—… ì„±ì¥ì„ ì˜ë¯¸í•œë‹¤.
âœ” ì§§ì€ ì´ë™ í‰ê· ì„ ê³¼ ê¸´ ì´ë™ í‰ê· ì„  ê°„ì˜ ê°„ê²©ì´ ë²Œì–´ì§€ëŠ” ì‹œê¸°ëŠ” ì¶”ì„¸ ê°•ë„ê°€ ê°•í™”ë˜ëŠ” ì‹œì ì´ë‹¤.


ì´ ê·¸ë˜í”„ëŠ” "ì¼ë³„ ë§¤ì¶œ ë° ì´ë™ í‰ê· ì„ "ì„ ë³´ì—¬ì£¼ëŠ” ì‹œê³„ì—´ ì°¨íŠ¸ì…ë‹ˆë‹¤. 
2016ë…„ ì´ˆë¶€í„° 2019ë…„ ë§ê¹Œì§€ì˜ ë°ì´í„°ë¥¼ ì‹œê°í™”í•˜ê³  ìˆìŠµë‹ˆë‹¤.

### ê·¸ë˜í”„ ìš”ì†Œ ì„¤ëª…:
- **íšŒìƒ‰ ë§‰ëŒ€**: ì¼ë³„ ë§¤ì¶œ ë°ì´í„°
- **íŒŒë€ìƒ‰ ì„ **: 7ì¼ ì´ë™ í‰ê·  (ë‹¨ê¸° ì¶”ì„¸)
- **ë¹¨ê°„ìƒ‰ ì„ **: 30ì¼ ì´ë™ í‰ê·  (ì¤‘ê¸° ì¶”ì„¸)
- **ì´ˆë¡ìƒ‰ ì„ **: 90ì¼ ì´ë™ í‰ê·  (ì¥ê¸° ì¶”ì„¸)

### ì£¼ìš” ë¶„ì„:

#### âœ… ì „ì²´ì ì¸ ë§¤ì¶œ ì¶”ì„¸

âœ” 2016ë…„ë¶€í„° 2019ë…„ê¹Œì§€ ì „ì²´ì ìœ¼ë¡œ ìƒìŠ¹í•˜ëŠ” ì¶”ì„¸ë¥¼ ë³´ì…ë‹ˆë‹¤.
âœ” ì´ˆë¡ìƒ‰ìœ¼ë¡œ í‘œì‹œëœ 90ì¼ ì´ë™ í‰ê· ì„ ì´ 2016ë…„ ì´ˆ ì•½ 1.5Mì—ì„œ 2019ë…„ ë§ ì•½ 4.5Mê¹Œì§€ ìƒìŠ¹í•˜ì—¬, 
  ì•½ 3ë°°ì˜ ì„±ì¥ì´ ìˆì—ˆìŒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
âœ” ì„±ì¥ ì¶”ì„¸ëŠ” ì™„ë§Œí•˜ì§€ë§Œ ê¾¸ì¤€í•˜ê²Œ ì´ì–´ì ¸ ì™”ìœ¼ë©°, íŠ¹íˆ 2019ë…„ í›„ë°˜ì— ë” ê°€íŒŒë¥¸ ìƒìŠ¹ì„¸ë¥¼ ë³´ì…ë‹ˆë‹¤.

#### âœ… ê³„ì ˆì  íŒ¨í„´ ë¶„ì„
    
âœ” ë§¤ë…„ ë°˜ë³µë˜ëŠ” íŒ¨í„´ì´ ê´€ì°°ë©ë‹ˆë‹¤:
   - ì—°ë§(11-12ì›”)ê³¼ ì—°ì´ˆ(1ì›”)ì— ë§¤ì¶œì´ ìƒìŠ¹í•˜ëŠ” ê²½í–¥
   - 2-3ì›”ì—ëŠ” ë§¤ì¶œì´ ë‹¤ì†Œ í•˜ë½í•˜ëŠ” íŒ¨í„´
   - ì—¬ë¦„ì² (7-8ì›”)ì—ë„ ë§¤ì¶œ ìƒìŠ¹ì´ ê´€ì°°ë¨
âœ” ì´ëŸ¬í•œ ê³„ì ˆì  íŒ¨í„´ì€ 30ì¼ ì´ë™ í‰ê· ì„ (ë¹¨ê°„ìƒ‰)ì—ì„œ ë” ëšœë ·í•˜ê²Œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### âœ… ë‹¨ê¸° vs ì¥ê¸° ì¶”ì„¸ ë¹„êµ

âœ” 7ì¼ ì´ë™ í‰ê· ì„ (íŒŒë€ìƒ‰)ì€ ì¼ë³„ ë§¤ì¶œì˜ ë‹¨ê¸°ì  ë³€ë™ì„±ì„ ì™„í™”í•˜ë©´ì„œë„ ì£¼ê°„ ë‹¨ìœ„ì˜ íŒ¨í„´ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.
âœ” 30ì¼ ì´ë™ í‰ê· ì„ (ë¹¨ê°„ìƒ‰)ì€ ì›”ê°„ íŠ¸ë Œë“œë¥¼ ë³´ì—¬ì£¼ë©°, ê³„ì ˆì  íŒ¨í„´ì´ ë” ëª…í™•íˆ ë“œëŸ¬ë‚©ë‹ˆë‹¤.
âœ” 90ì¼ ì´ë™ í‰ê· ì„ (ì´ˆë¡ìƒ‰)ì€ ë‹¨ê¸°ì  ë³€ë™ê³¼ ê³„ì ˆì„±ì„ í‰í™œí™”í•˜ì—¬ ì¥ê¸°ì ì¸ ì‚¬ì—… ì„±ì¥ ë°©í–¥ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.

#### âœ… ì£¼ëª©í•  ë§Œí•œ ì‹œì 

âœ” **2018ë…„ 7-8ì›”**: ì¼ë³„ ë§¤ì¶œê³¼ 7ì¼ ì´ë™ í‰ê· ì—ì„œ ë†’ì€ í”¼í¬ê°€ ê´€ì°°ë˜ë©°, ì´ëŠ” íŠ¹ë³„í•œ ì´ë²¤íŠ¸ë‚˜ ëŒ€í˜• ê±°ë˜ê°€ ìˆì—ˆì„ ê°€ëŠ¥ì„±ì„ ì‹œì‚¬í•©ë‹ˆë‹¤.
âœ” **2018-2019ë…„**: ë§¤ì¶œì˜ ë³€ë™ì„±ì´ ì´ì „ ê¸°ê°„ë³´ë‹¤ ì»¤ì§€ëŠ” ê²½í–¥ì„ ë³´ì´ë©°, ì¼ë³„ ë§¤ì¶œì˜ ìµœê³ ì¹˜ë„ ë†’ì•„ì¡ŒìŠµë‹ˆë‹¤.
âœ” **2019ë…„ í•˜ë°˜ê¸°**: ëª¨ë“  ì´ë™ í‰ê· ì„ ì´ ë™ì‹œì— ìƒìŠ¹í•˜ëŠ” ì¶”ì„¸ë¥¼ ë³´ì—¬ í™•ì‹¤í•œ ì„±ì¥ê¸°ì„ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ë¹„ì¦ˆë‹ˆìŠ¤ ì¸ì‚¬ì´íŠ¸:

ğŸš€ **ë§¤ì¶œ ê³„íš ìˆ˜ë¦½**: í™•ì¸ëœ ê³„ì ˆì  íŒ¨í„´(ì—°ë§/ì—°ì´ˆ ë° ì—¬ë¦„ì²  ë§¤ì¶œ ìƒìŠ¹)ì„ 
                       ê³ ë ¤í•œ ì—°ê°„ ë§¤ì¶œ ëª©í‘œ ë° ë§ˆì¼€íŒ… ê³„íšì„ ìˆ˜ë¦½í•´ì•¼ í•©ë‹ˆë‹¤.

ğŸš€ **ì¬ê³  ê´€ë¦¬ ìµœì í™”**: ë§¤ì¶œì´ ê¸‰ì¦í•˜ëŠ” ì‹œê¸°ì— ì•ì„œ ì ì ˆí•œ ì¬ê³ ë¥¼ í™•ë³´í•˜ê³ , 
                        ë§¤ì¶œì´ ë‘”í™”ë˜ëŠ” ì‹œê¸°ì—ëŠ” ì¬ê³ ë¥¼ ì¤„ì´ëŠ” ì „ëµì´ í•„ìš”í•©ë‹ˆë‹¤.

ğŸš€ **ì„±ì¥ ì „ëµ**: ì¥ê¸°ì ì¸ ì„±ì¥ ì¶”ì„¸ë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•´ 2019ë…„ í•˜ë°˜ê¸°ì— íš¨ê³¼ì ì´ì—ˆë˜ ì „ëµì„ ë¶„ì„í•˜ê³  
                  ê°•í™”í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.

ğŸš€ **ë³€ë™ì„± ê´€ë¦¬**: ë§¤ì¶œ ë³€ë™ì„±ì´ ì¦ê°€í•˜ëŠ” ì¶”ì„¸ì— ëŒ€ì‘í•˜ì—¬, ë¦¬ìŠ¤í¬ ê´€ë¦¬ ë° ìœ ì—°í•œ ìš´ì˜ ì²´ê³„ë¥¼ êµ¬ì¶•í•´ì•¼ í•©ë‹ˆë‹¤.

ì´ë™ í‰ê· ì„  ë¶„ì„ì„ í†µí•´ ì¼ì‹œì ì¸ ë§¤ì¶œ ë³€ë™ì— ê³¼ì‰ ë°˜ì‘í•˜ì§€ ì•Šê³ , ì¤‘ì¥ê¸°ì  ì¶”ì„¸ì— ê¸°ë°˜í•œ ì „ëµì  ì˜ì‚¬ê²°ì •ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

### - ì¶”ê°€ ë¶„ì„ - ë³€ë™ì„± ë° ì¶”ì„¸ ê°•ë„ ì¸¡ì •

ì´ë™ í‰ê·  ë¶„ì„ì˜ í™•ì¥ìœ¼ë¡œ, ë§¤ì¶œ ë³€ë™ì„±ê³¼ ì¶”ì„¸ ê°•ë„ë¥¼ ì¸¡ì •í•˜ì—¬ ë” ê¹Šì€ ì¸ì‚¬ì´íŠ¸ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.

```python
import pandas as pd
import numpy as np
import plotly.graph_objects as go
from plotly.subplots import make_subplots

# ì¼ë³„ ë§¤ì¶œ ë°ì´í„° ì‚¬ìš© (ì•ì„œ ìƒì„±í•œ daily_sales ë°ì´í„°í”„ë ˆì„)

# 1. ë³¼ë¦°ì € ë°´ë“œ ê³„ì‚° (20ì¼ ì´ë™ í‰ê·  ê¸°ì¤€)
window = 20
daily_sales['MA20'] = daily_sales['ë§¤ì¶œ'].rolling(window=window).mean()
daily_sales['STD20'] = daily_sales['ë§¤ì¶œ'].rolling(window=window).std()
daily_sales['UpperBand'] = daily_sales['MA20'] + (daily_sales['STD20'] * 2)
daily_sales['LowerBand'] = daily_sales['MA20'] - (daily_sales['STD20'] * 2)

# 2. ë³€ë™ì„± ì§€í‘œ ê³„ì‚° - ìƒëŒ€ì  ë³€ë™í­
daily_sales['Volatility'] = (daily_sales['STD20'] / daily_sales['MA20']) * 100  # ë°±ë¶„ìœ¨ë¡œ í‘œí˜„

# 3. ì¶”ì„¸ ê°•ë„ ì§€í‘œ ê³„ì‚° - MACD ê¸°ë°˜
daily_sales['EMA12'] = daily_sales['ë§¤ì¶œ'].ewm(span=12, adjust=False).mean()  # 12ì¼ ì§€ìˆ˜ ì´ë™ í‰ê· 
daily_sales['EMA26'] = daily_sales['ë§¤ì¶œ'].ewm(span=26, adjust=False).mean()  # 26ì¼ ì§€ìˆ˜ ì´ë™ í‰ê· 
daily_sales['MACD'] = daily_sales['EMA12'] - daily_sales['EMA26']  # MACD ë¼ì¸
daily_sales['Signal'] = daily_sales['MACD'].ewm(span=9, adjust=False).mean()  # ì‹ í˜¸ì„ 
daily_sales['Histogram'] = daily_sales['MACD'] - daily_sales['Signal']  # íˆìŠ¤í† ê·¸ë¨

# ë³¼ë¦°ì € ë°´ë“œ ë° ë³€ë™ì„± ì‹œê°í™”
fig3 = make_subplots(rows=2, cols=1, 
                    shared_xaxes=True, 
                    vertical_spacing=0.1, 
                    row_heights=[0.7, 0.3],
                    subplot_titles=('ë³¼ë¦°ì € ë°´ë“œ (ë§¤ì¶œ ë³€ë™ì„±)', 'ìƒëŒ€ ë³€ë™ì„± (%)'))

# ë©”ì¸ ì°¨íŠ¸ - ë³¼ë¦°ì € ë°´ë“œ
fig3.add_trace(
    go.Scatter(x=daily_sales['ì£¼ë¬¸ ì¼ì'], y=daily_sales['ë§¤ì¶œ'],
              mode='lines', name='ì¼ë³„ ë§¤ì¶œ',
              line=dict(color='gray', width=1)),
    row=1, col=1
)

fig3.add_trace(
    go.Scatter(x=daily_sales['ì£¼ë¬¸ ì¼ì'], y=daily_sales['MA20'],
              mode='lines', name='20ì¼ ì´ë™ í‰ê· ',
              line=dict(color='blue', width=2)),
    row=1, col=1
)

fig3.add_trace(
    go.Scatter(x=daily_sales['ì£¼ë¬¸ ì¼ì'], y=daily_sales['UpperBand'],
              mode='lines', name='ìƒë‹¨ ë°´ë“œ (+2Ïƒ)',
              line=dict(color='rgba(0, 128, 0, 0.3)', width=1)),
    row=1, col=1
)

fig3.add_trace(
    go.Scatter(x=daily_sales['ì£¼ë¬¸ ì¼ì'], y=daily_sales['LowerBand'],
              mode='lines', name='í•˜ë‹¨ ë°´ë“œ (-2Ïƒ)',
              line=dict(color='rgba(255, 0, 0, 0.3)', width=1),
              fill='tonexty', fillcolor='rgba(200, 200, 200, 0.2)'),
    row=1, col=1
)

# í•˜ë‹¨ ì°¨íŠ¸ - ë³€ë™ì„± ì§€í‘œ
fig3.add_trace(
    go.Scatter(x=daily_sales['ì£¼ë¬¸ ì¼ì'], y=daily_sales['Volatility'],
              mode='lines', name='ìƒëŒ€ ë³€ë™ì„±',
              line=dict(color='orange', width=2)),
    row=2, col=1
)

# ì°¨íŠ¸ ë ˆì´ì•„ì›ƒ ì„¤ì •
fig3.update_layout(
    title='ë§¤ì¶œ ë³€ë™ì„± ë¶„ì„ (ë³¼ë¦°ì € ë°´ë“œ)',
    xaxis_title='ë‚ ì§œ',
    width=1000,
    height=800,
    legend=dict(x=0.01, y=0.99, bgcolor='rgba(255, 255, 255, 0.5)')
)

fig3.update_yaxes(title_text='ë§¤ì¶œ', row=1, col=1)
fig3.update_yaxes(title_text='ë³€ë™ì„± (%)', row=2, col=1)

fig3.show()
```

### - ë¶„ì„ ê²°ê³¼ í•´ì„

#### âœ… ë³¼ë¦°ì € ë°´ë“œ ë¶„ì„
âœ” ë°´ë“œ í­ í™•ëŒ€: ë°´ë“œê°€ ë„“ì–´ì§€ëŠ” êµ¬ê°„ì€ ë§¤ì¶œ ë³€ë™ì„±ì´ ì»¤ì§€ëŠ” ì‹œê¸°ë¡œ, ì‹œì¥ ë¶ˆí™•ì‹¤ì„±ì´ ì¦ê°€í•¨ì„ ì˜ë¯¸í•œë‹¤.
âœ” ë°´ë“œ í­ ì¶•ì†Œ: ë°´ë“œê°€ ì¢ì•„ì§€ëŠ” êµ¬ê°„ì€ ë§¤ì¶œ ë³€ë™ì„±ì´ ì¤„ì–´ë“œëŠ” ì‹œê¸°ë¡œ, ì•ˆì •ì ì¸ ë§¤ì¶œ íŒ¨í„´ì„ ë‚˜íƒ€ë‚¸ë‹¤.
âœ” ë°´ë“œ ëŒíŒŒ: ë§¤ì¶œì´ ìƒë‹¨/í•˜ë‹¨ ë°´ë“œë¥¼ ëŒíŒŒí•˜ëŠ” ê²½ìš°ëŠ” ë¹„ì •ìƒì ì¸ ë§¤ì¶œ ë³€í™”ë¡œ, íŠ¹ë³„í•œ ì´ë²¤íŠ¸ë‚˜ ì‹œì¥ ë³€í™”ë¥¼ ì‹œì‚¬í•œë‹¤.

#### âœ… ë³€ë™ì„± ì§€í‘œ ë¶„ì„
âœ” ë³€ë™ì„± ì¦ê°€ êµ¬ê°„: ì‹œì¥ ë¶ˆì•ˆì •ì„±ì´ ì»¤ì§€ëŠ” ì‹œê¸°ë¡œ, ë¦¬ìŠ¤í¬ ê´€ë¦¬ê°€ í•„ìš”í•˜ë‹¤.
âœ” ë³€ë™ì„± ê°ì†Œ êµ¬ê°„: ë§¤ì¶œ ì˜ˆì¸¡ ì •í™•ë„ê°€ ë†’ì•„ì§€ëŠ” ì‹œê¸°ë¡œ, ì•ˆì •ì ì¸ ê³„íš ìˆ˜ë¦½ì´ ìš©ì´í•˜ë‹¤.
âœ” ë³€ë™ì„± íŒ¨í„´: íŠ¹ì • ì‹œê¸°(ì˜ˆ: í™€ë¦¬ë°ì´ ì‹œì¦Œ)ì— ë°˜ë³µë˜ëŠ” ë³€ë™ì„± íŒ¨í„´ì€ ê³„ì ˆì  ìš”ì¸ì— ì˜í•œ ê²ƒìœ¼ë¡œ ë³¼ ìˆ˜ ìˆë‹¤.

#### âœ… MACD ë¶„ì„ì„ í†µí•œ ì¶”ì„¸ ê°•ë„ íŒŒì•…
âœ” MACD ìƒí–¥ ì¶”ì„¸: ìƒìŠ¹ ëª¨ë©˜í…€ì´ ê°•í™”ë˜ëŠ” ì‹œê¸°ë¡œ, ë§¤ì¶œ ì„±ì¥ ê°€ì†í™”ë¥¼ ì˜ë¯¸í•œë‹¤.
âœ” MACD í•˜í–¥ ì¶”ì„¸: í•˜ë½ ëª¨ë©˜í…€ì´ ê°•í™”ë˜ëŠ” ì‹œê¸°ë¡œ, ë§¤ì¶œ ì„±ì¥ ë‘”í™” ë˜ëŠ” ê°ì†Œë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.
âœ” íˆìŠ¤í† ê·¸ë¨ í­: íˆìŠ¤í† ê·¸ë¨ í­ì´ ë„“ì–´ì§ˆìˆ˜ë¡ í˜„ì¬ ì¶”ì„¸ì˜ ê°•ë„ê°€ ê°•í•¨ì„ ì˜ë¯¸í•œë‹¤.

ì œì‹œëœ ë‘ ê·¸ë˜í”„ëŠ” ë§¤ì¶œ ë³€ë™ì„± ë¶„ì„ì— ê´€í•œ ì‹œê°í™”ì…ë‹ˆë‹¤.

### ê·¸ë˜í”„ 1: ë§¤ì¶œ ë³€ë™ì„± ë¶„ì„ (ë³¼ë¦°ì € ë°´ë“œ)

ì´ ê·¸ë˜í”„ëŠ” ë³¼ë¦°ì € ë°´ë“œë¥¼ í™œìš©í•œ ë§¤ì¶œ ë³€ë™ì„± ë¶„ì„ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.

#### ì£¼ìš” êµ¬ì„±ìš”ì†Œ:
- **íšŒìƒ‰ ë§‰ëŒ€**: ì¼ë³„ ë§¤ì¶œ ë°ì´í„°
- **íŒŒë€ìƒ‰ ì„ **: 20ì¼ ì´ë™ í‰ê· ì„  (ì¶”ì„¸ íŒŒì•…)
- **ì´ˆë¡ìƒ‰ ì„ **: ìƒë‹¨ ë°´ë“œ (+2Ïƒ, í‘œì¤€í¸ì°¨ì˜ 2ë°° ìƒìŠ¹)
- **ë¹¨ê°„ìƒ‰ ì„ **: í•˜ë‹¨ ë°´ë“œ (-2Ïƒ, í‘œì¤€í¸ì°¨ì˜ 2ë°° í•˜ë½)
- **ì£¼í™©ìƒ‰ ì„ **: ìƒëŒ€ ë³€ë™ì„± (ë²”ë¡€ì—ëŠ” ì—†ì§€ë§Œ ì²« ë²ˆì§¸ ê·¸ë˜í”„ì—ëŠ” ë³´ì´ì§€ ì•ŠìŒ)

#### ë¶„ì„:

1. **ë³€ë™í­ í™•ëŒ€**: ì‹œê°„ì´ ì§€ë‚¨ì— ë”°ë¼ ë³¼ë¦°ì € ë°´ë“œì˜ í­ì´ í™•ëŒ€ë˜ëŠ” ì¶”ì„¸ë¥¼ ë³´ì´ë©°,
                   íŠ¹íˆ 2019ë…„ í›„ë°˜ë¶€ì— ê°€ì¥ ë„“ì–´ì¡ŒìŠµë‹ˆë‹¤. ì´ëŠ” ë§¤ì¶œ ë³€ë™ì„±ì´ ìµœê·¼ìœ¼ë¡œ ì˜¬ìˆ˜ë¡ ì¦ê°€í–ˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

2. **ìƒë‹¨ ë°´ë“œ ëŒíŒŒ**: ì—¬ëŸ¬ ì‹œì ì—ì„œ ë§¤ì¶œì´ ìƒë‹¨ ë°´ë“œë¥¼ ëŒíŒŒí–ˆëŠ”ë°, íŠ¹íˆ 2019ë…„ í›„ë°˜ì— ë” ìì£¼ ë°œìƒí–ˆìŠµë‹ˆë‹¤. 
                      ì´ëŠ” ì˜ˆìƒë³´ë‹¤ ë†’ì€ ë¹„ì •ìƒì  ë§¤ì¶œ ì¦ê°€ê°€ ìˆì—ˆìŒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

3. **ì¶”ì„¸ ìƒìŠ¹**: 20ì¼ ì´ë™ í‰ê· ì„ (íŒŒë€ìƒ‰)ì´ ì „ë°˜ì ìœ¼ë¡œ ìƒìŠ¹ ì¶”ì„¸ë¥¼ ë³´ì´ë©°, 
                 íŠ¹íˆ 2019ë…„ í›„ë°˜ì— ë” ê°€íŒŒë¥¸ ìƒìŠ¹ì„¸ë¥¼ ë³´ì…ë‹ˆë‹¤.

4. **ì£¼ê¸°ì  íŒ¨í„´**: ë§¤ì¶œ ë°ì´í„°ì—ì„œ ê·œì¹™ì ì¸ ì£¼ê¸°ì„±ì´ ê´€ì°°ë˜ë©°, 
                    ì´ëŠ” ê³„ì ˆì  ìš”ì¸ì´ë‚˜ ì‚¬ì—… ì£¼ê¸°ì— ì˜í–¥ì„ ë°›ëŠ” ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.

### ê·¸ë˜í”„ 2: ìƒëŒ€ ë³€ë™ì„± (%)

ì´ ê·¸ë˜í”„ëŠ” ì‹œê°„ì— ë”°ë¥¸ ë§¤ì¶œì˜ ìƒëŒ€ì  ë³€ë™ì„±ì„ ë°±ë¶„ìœ¨ë¡œ ë³´ì—¬ì¤ë‹ˆë‹¤.

#### ë¶„ì„:
                      
1. **ë³€ë™ì„± ê°ì†Œ ì¶”ì„¸**: 2016ë…„ ì´ˆ ì•½ 250%ì˜ ë§¤ìš° ë†’ì€ ë³€ë™ì„±ì—ì„œ ì‹œì‘í•˜ì—¬ ì‹œê°„ì´ ì§€ë‚¨ì— ë”°ë¼ ì „ë°˜ì ìœ¼ë¡œ ê°ì†Œí•˜ëŠ” ì¶”ì„¸ë¥¼ ë³´ì…ë‹ˆë‹¤. 2019ë…„ ë§ì—ëŠ” ì•½ 70% ìˆ˜ì¤€ìœ¼ë¡œ ì•ˆì •í™”ë˜ì—ˆìŠµë‹ˆë‹¤.

2. **ì£¼ìš” ë³€ë™ì„± í”¼í¬**: 
   - 2016ë…„ ì´ˆ: ê°€ì¥ ë†’ì€ 250%ì˜ ë³€ë™ì„±
   - 2017ë…„ ì¤‘ë°˜: ì•½ 200%ë¡œ ë‹¤ì‹œ ê¸‰ì¦
   - 2018ë…„ ì¤‘ë°˜: 150% ìˆ˜ì¤€ì˜ ë³€ë™ì„± í”¼í¬
   - 2019ë…„ ì¤‘ë°˜: ì•½ 50%ê¹Œì§€ ë–¨ì–´ì§„ í›„ ë‹¤ì‹œ ë°˜ë“±

3. **ì•ˆì •í™” íŒ¨í„´**: 2018ë…„ ì´í›„ë¡œ ë³€ë™ì„±ì˜ ì§„í­ì´ ì‘ì•„ì§€ê³  ìˆì–´, ë¹„ì¦ˆë‹ˆìŠ¤ê°€ ì ì°¨ ì•ˆì •í™”ë˜ê³  ìˆìŒì„ ì‹œì‚¬í•©ë‹ˆë‹¤.

### â–  ê²°ë¡  ë° ì‹¤í–‰ ì „ëµ

ğŸš€ ì´ë™ í‰ê· ì„  ë¶„ì„ì„ í†µí•´ ë‹¨ê¸° ë…¸ì´ì¦ˆë¥¼ ì œê±°í•˜ê³  ì‹¤ì§ˆì ì¸ ë§¤ì¶œ ì¶”ì„¸ë¥¼ íŒŒì•…í•˜ì—¬ ì¤‘ì¥ê¸° ì „ëµ ìˆ˜ë¦½ì´ ê°€ëŠ¥í•˜ë‹¤.
ğŸš€ ë‹¤ì–‘í•œ ì£¼ê¸°ì˜ ì´ë™ í‰ê· ì„  êµì°¨ì ì„ ëª¨ë‹ˆí„°ë§í•˜ì—¬ ë§¤ì¶œ ì¶”ì„¸ ì „í™˜ ì‹œì ì„ ì¡°ê¸°ì— ê°ì§€í•˜ê³  ëŒ€ì‘í•  ìˆ˜ ìˆë‹¤.
ğŸš€ ë³¼ë¦°ì € ë°´ë“œì™€ ë³€ë™ì„± ì§€í‘œë¥¼ í™œìš©í•˜ì—¬ ë§¤ì¶œì˜ ì•ˆì •ì„±ê³¼ ì˜ˆì¸¡ ê°€ëŠ¥ì„±ì„ í‰ê°€í•˜ê³ , ì´ì— ë§ëŠ” ì¬ê³  ë° ì¸ë ¥ ê³„íšì„ ìˆ˜ë¦½í•œë‹¤.
ğŸš€ ê³„ì ˆì  íŒ¨í„´ê³¼ ì¥ê¸°ì  ì¶”ì„¸ë¥¼ êµ¬ë¶„í•˜ì—¬ ì¼ì‹œì ì¸ ë§¤ì¶œ ë³€ë™ì— ê³¼ì‰ ëŒ€ì‘í•˜ì§€ ì•Šê³  ì¥ê¸°ì ì¸ ì‚¬ì—… ë°©í–¥ì„±ì— ì§‘ì¤‘í•œë‹¤.
ğŸš€ ì¶”ì„¸ ê°•ë„ ì§€í‘œë¥¼ í™œìš©í•˜ì—¬ ë§¤ì¶œ ì„±ì¥ ê°€ì†í™” ì‹œê¸°ì— ë§ˆì¼€íŒ… ë° í™•ì¥ì„ ê°•í™”í•˜ê³ , ë‘”í™” ì‹œê¸°ì—ëŠ” ë¹„ìš© íš¨ìœ¨í™”ì— ì§‘ì¤‘í•œë‹¤.

ì´ë™ í‰ê· ì„  ê·¸ë˜í”„ëŠ” ì‹œê³„ì—´ ë°ì´í„°ì˜ ë…¸ì´ì¦ˆë¥¼ ì œê±°í•˜ê³  ì‹¤ì§ˆì ì¸ ì¶”ì„¸ë¥¼ íŒŒì•…í•˜ëŠ” ê°•ë ¥í•œ ë„êµ¬ë¡œ,
ë‹¨ê¸°ì  ë³€ë™ì— ì¢Œìš°ë˜ì§€ ì•Šê³  ë°ì´í„°ì— ê¸°ë°˜í•œ ì „ëµì  ì˜ì‚¬ê²°ì •ì„ ê°€ëŠ¥í•˜ê²Œ í•œë‹¤.
ë‹¤ì–‘í•œ ì£¼ê¸°ì˜ ì´ë™ í‰ê· ê³¼ íŒŒìƒ ì§€í‘œë¥¼ í•¨ê»˜ í™œìš©í•˜ë©´ ë”ìš± ì •êµí•œ ì‹œì¥ ë¶„ì„ê³¼ ì˜ˆì¸¡ì´ ê°€ëŠ¥í•˜ë‹¤.
