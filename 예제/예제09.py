▣ 예제9. 페어 플롯 (Pair Plot) - 변수 간 관계 분석

1. 페어 플롯이 언제 필요한가?

- 여러 연속형 변수 간의 관계를 동시에 분석할 때 유용
- 변수 간의 산점도(scatter plot)와 분포(distribution)를 한눈에 비교 가능
- 데이터의 상관관계 및 패턴을 파악하는 데 효과적
- 예: 매출, 수익, 할인율, 주문 수량 간의 관계 분석, 고객 세그먼트별 구매 패턴 비교, 제품별 주요 지표 간 상관관계 분석

2. 문제: 매출, 수익, 할인율, 주문 수량 간의 관계는 어떻게 되는가?

목적:
- 매출이 높은 제품군과 수익률 간의 관계를 분석
- 할인율이 높을수록 매출이 증가하는지, 또는 오히려 수익성이 떨어지는지 검토
- 주문 수량이 많을수록 매출과 수익에 미치는 영향 분석

3. 데이터 로드 및 페어 플롯 생성

import pandas as pd
import seaborn as sns
import matplotlib.pyplot as plt

# 데이터 로드
df = pd.read_csv("c:\\data\\SUPERSTORE_2019.csv")

# 분석할 주요 변수 선택
pairplot_data = df[["매출", "수익", "할인율", "수량"]]

# 페어 플롯 생성
sns.pairplot(pairplot_data, diag_kind="kde")
plt.suptitle("매출, 수익, 할인율, 주문 수량 간의 관계", y=1.02)
plt.show()

4. 분석 결과 해석

✅ 매출 vs 수익
✔ 양의 상관관계 확인, 매출이 증가할수록 수익도 증가
✔ 일부 데이터에서 매출이 높음에도 불구하고 손실 발생 → 할인율과 관련될 가능성

✅ 매출 vs 할인율
✔ 일부 구간에서 할인율이 높을수록 매출이 증가하는 경향
✔ 하지만 과도한 할인율은 오히려 수익 감소로 이어질 가능성 존재

✅ 매출 vs 수량
✔ 주문 수량이 많을수록 매출이 증가하는 경향
✔ 일부 데이터에서는 수량이 많아도 매출이 낮음 → 저가 제품의 영향 가능성

✅ 수익 vs 할인율
✔ 할인율이 높아질수록 수익이 감소하는 패턴
✔ 할인율 증가가 무조건적으로 수익 증가로 이어지지 않음 → 최적 할인율 설정 필요

✅ 수익 vs 수량
✔ 주문 수량이 증가할수록 수익도 증가하는 경향
✔ 하지만 일부 데이터에서는 주문 수량이 많아도 손실 발생 가능 → 높은 할인율 적용 때문일 가능성

5. 인사이트 및 전략 제안

💡 매출과 수익 최적화
✔ 할인율을 조절하여 수익성을 유지할 필요 있음
✔ 특정 제품군에서 너무 높은 할인율을 제공하는 경우 손실 가능성 검토 필요

💡 할인 전략 조정
✔ 고객 반응이 좋은 제품에만 선택적으로 할인을 적용하여 과도한 할인 방지
✔ 할인율이 높은 제품 중 손실이 발생하는 제품군의 가격 정책 조정 필요

💡 저가 제품과 고가 제품 전략
✔ 주문 수량이 많아도 매출과 수익이 낮은 경우, 저가 제품의 마진 개선 필요
✔ 프리미엄 제품의 판매 확대를 통해 객단가(고객당 평균 구매 금액) 증가 유도

6. 추가 분석 - 할인율과 수익의 관계가 통계적으로 유의한가?

import statsmodels.api as sm

# 독립 변수(X) - 할인율, 종속 변수(Y) - 수익
X = df["할인율"]
y = df["수익"]

# 상수 추가 (회귀 모델의 절편 포함)
X = sm.add_constant(X)

# 선형 회귀 분석 실행
model = sm.OLS(y, X).fit()

# 결과 출력
print(model.summary())

7. 분석 결과 해석

✅ 회귀 분석 결과 (할인율 vs 수익)

- p-value가 0.05 미만이면 할인율이 수익에 유의미한 영향을 미친다는 의미
- 회귀 계수가 음수라면, 할인율이 증가할수록 수익이 감소하는 경향이 있음을 시사
- 할인율과 수익 간의 상관관계가 크다면, 할인 전략을 조정하여 손실을 최소화할 필요 있음

8. 결론 및 실행 전략

🚀 매출 증가를 위해 무조건적인 할인 정책을 시행하면 수익이 악화될 수 있음
🚀 적정 할인율을 설정하고, 수익성이 높은 제품군 위주로 할인 적용 필요
🚀 할인율이 높은 제품 중 수익성이 낮은 제품을 선별하여 가격 조정 전략 수립 필요

이러한 분석을 바탕으로, 가격 전략을 최적화하고, 할인 정책을 조정하여 매출과 수익을 동시에 극대화할 수 있음
